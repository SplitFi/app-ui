docker:
  - image: znck/pnpm:latest
resource_class: large
parallelism: 10
steps:
  - checkout
  - restore_cache:
      name: Restore pnpm Package Cache
      keys:
        - pnpm-packages-{{ checksum "pnpm-lock.yaml" }}
  - run:
      name: Install Dependencies
      command: |
        pnpm install
      environment:
        TURBO_UI: "false"
        # https://stackoverflow.com/questions/70154568/pnpm-equivalent-command-for-npm-ci
        CI: "true"
  - save_cache:
      name: Save pnpm Package Cache
      key: pnpm-packages-{{ checksum "pnpm-lock.yaml" }}
      paths:
        - .pnpm-store
