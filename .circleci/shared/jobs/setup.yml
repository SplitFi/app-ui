docker:
  - image: node:18
resource_class: large
parallelism: 10
steps:
  - checkout
  - restore_cache:
      name: Restore pnpm cache
      keys:
        - pnpm-packages-{{ checksum "pnpm-lock.yaml" }}
  - run:
      name: Install pnpm package manager
      command: |
        corepack enable
        corepack prepare pnpm@latest-9 --activate
        pnpm config set store-dir .pnpm-store
      environment:
        TURBO_UI: "false"
  - run:
      name: Install Dependencies
      command: |
        pnpm install --frozen-lockfile
      environment:
        TURBO_UI: "false"
  - save_cache:
      name: Save pnpm cache
      key: pnpm-packages-{{ checksum "pnpm-lock.yaml" }}
      paths:
        - .pnpm-store
